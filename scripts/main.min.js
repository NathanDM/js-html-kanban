var Draggable = {
    onSelectItem: function (e) {
        //Store the selectedNode
        this.state.selectedNode = e.currentTarget;
        var parent = this.state.selectedNode.parentNode;
        //get the initial position of the node
        var offsetLeft = this.state.selectedNode.offsetLeft;
        var offsetTop = this.state.selectedNode.offsetTop;

        //Put the node in the foreground
        parent.removeChild(this.state.selectedNode);
        parent.appendChild(this.state.selectedNode);

        //Change the mouse cursor
        this.state.selectedNode.style.cursor = '-webkit-grabbing';
        this.state.selectedNode.className += " animate";

        //store the mouse offset on the node
        this.state.offsetX = e.clientX - offsetLeft;
        this.state.offsetY = e.clientY - offsetTop;
    },

    onMove: function (e) {
        if (this.state.selectedNode) {
            //Move Node
            this.state.selectedNode.style.top = e.clientY - this.state.offsetY + "px";
            this.state.selectedNode.style.left = e.clientX - this.state.offsetX + "px";
        }
    },

    onDeselectItem: function () {
        //Change the mouse cursor
        this.state.selectedNode.style.cursor = '-webkit-grab';
        //Manage special element (ei.SVG)
        if (this.state.selectedNode.className.replace) {
            this.state.selectedNode.className = this.state.selectedNode.className.replace("animate", "");
        }

        this.state.selectedNode = null;
        this.state.offsetX = 0;
        this.state.offsetY = 0;
    },

    onMouseUp: function () {
        if (this.state.selectedNode) {
            this.state.selectedNode.className = this.state.selectedNode.className.replace("animate", "");
            this.onDeselectItem();
        }
    }
}

"use strict"

/**
 * This class builds the react Application.
 *
 * @author $Author$
 */

var App = React.createClass({displayName: "App",

    getInitialState : function () {
        return {};
    },

    render: function() {
        return (
            React.createElement("div", null, 
                React.createElement(Header, null), 
                React.createElement(Kanban, null)
            )
            );
    }
});

"use strict"

/**
 * This class builds the header menu
 *
 * @author $Author$
 */
var Header = React.createClass({displayName: "Header",
    getInitialState: function () {
        return {isZoomed: false};
    },
    render: function () {
        return (
            React.createElement("div", {className: "header"}, 
                React.createElement("div", {className: "topBar"}


                )
            )
            );
    }
});

"use strict";

/**
 * This class builds the new Kanban.
 *
 * @author $Author$
 */
var Kanban = React.createClass({displayName: "Kanban",

    mixins : [Draggable],
    getInitialState: function () {
        var retval = {};
        retval.columns = [];

        retval.columns[0] = {
            title: "ToDo",
            displayOrder: 0
        };

        retval.columns[1] = {
            title: "WIP",
            displayOrder: 1
        };

        retval.columns[2] = {
            title: "WIP",
            displayOrder: 2
        };
        return retval
    },
    render: function() {
        var x = 150,
            y = 0;
        var color = "#f9f9f9";


        return (
            React.createElement("div", null, 
                React.createElement("div", {className: "kanban", onMouseUp: this.onMouseUp, onMouseMove: this.onMove}, 
                    React.createElement(Column, {x: "0", y: "0", title: "Backlog"}), 
                    React.createElement("img", {src: "https://s3.amazonaws.com/uifaces/faces/twitter/sauro/128.jpg", alt: "", className: "avatar"}), 
                    React.createElement("img", {src: "https://s3.amazonaws.com/uifaces/faces/twitter/jsa/128.jpg", alt: "", className: "avatar"}), 
                    React.createElement("img", {src: "https://s3.amazonaws.com/uifaces/faces/twitter/gerrenlamson/128.jpg", alt: "", className: "avatar"}), 
                this.state.columns.map(function (item, i) {
                        x += 300;
                        color = color === "white" ? "#f9f9f9" : "white";
                        return (React.createElement(Column, {color: color, x: x, y: y, title: item.title, key: i}, " ", item.title));
                    }
                ), 



                    React.createElement(Sticky, {x: "50px", y: "50px", className: "warn", onSelect: this.onSelectItem, onDeselect: this.onDeselectItem}), 
                    React.createElement(Sticky, {x: "50px", y: "100px", className: "info", onSelect: this.onSelectItem, onDeselect: this.onDeselectItem}), 
                    React.createElement(Sticky, {x: "50px", y: "150px", className: "default", onSelect: this.onSelectItem, onDeselect: this.onDeselectItem}), 
                    React.createElement(Sticky, {x: "50px", y: "200px", className: "danger", onSelect: this.onSelectItem, onDeselect: this.onDeselectItem}), 
                    React.createElement(Sticky, {x: "50px", y: "250px", className: "success", onSelect: this.onSelectItem, onDeselect: this.onDeselectItem}), 
                    React.createElement(Cicle, {x: "550px", y: "250px", radius: "200", onSelect: this.onSelectItem, onDeselect: this.onDeselectItem})
                )
            )
            );
    }
});

"use strict";

/**
 * This class manage a StickyNote component
 *
 * @author $Author$
 */
var Sticky = React.createClass({displayName: "Sticky",
    getInitialState : function () {
        return {offsetX:0, offsetY:0};
    },
    onMouseDown : function (e) {
        this.props.onSelect(e);
    },
    onMouseUp: function(e) {
        this.props.onDeselect();
    },
    render: function() {

        var css = {
            top: this.props.y,
            left: this.props.x
        }

        return (
            React.createElement("div", {className: this.props.className + " sticky", style: css, onMouseDown: this.onMouseDown, onMouseUp: this.onMouseUp}, " ")
            );
    }
});

"use strict";

/**
 * This class builds the new Kanban.
 *
 * @author $Author$
 */
var Cicle = React.createClass({displayName: "Cicle",

    getInitialState: function () {
        return {}
    },
    onMouseDown : function (e) {
        this.props.onSelect(e);
    },
    onMouseUp: function(e) {
        this.props.onDeselect();
    },
    render: function() {
        var css = {
            top: this.props.y,
            left: this.props.x
        }
        return (
            React.createElement("svg", {onMouseDown: this.onMouseDown, style: css, onMouseUp: this.onMouseUp, width: this.props.radius * 2, height: this.props.radius * 2}, 
                React.createElement("circle", {cx: this.props.radius, cy: this.props.radius, r: this.props.radius, stroke: "green", fill: "yellow"})
            )
            );
    }
});

"use strict";

/**
 * This class manage a Column component
 *
 * @author $Author$
 */
var Column = React.createClass({displayName: "Column",
    getInitialState : function () {
        return {displayOrder: 0};
    },
    render: function() {
        var css = {
            top: this.props.y,
            left: this.props.x,
            backgroundColor: this.props.color
        }
        return (
            React.createElement("div", null, 
            React.createElement("div", {className: "column", style: css}, " ")
            )
            );
    }
});

/*!
 *
 *  Web Starter Kit
 *  Copyright 2015 Google Inc. All rights reserved.
 *
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *
 *    https://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License
 *
 */
(function () {
  'use strict';

    React.render(React.createElement(App), document.getElementById('content'));


    // Check to make sure service workers are supported in the current browser,
  // and that the current page is accessed from a secure origin. Using a
  // service worker from an insecure origin will trigger JS console errors. See
  // http://www.chromium.org/Home/chromium-security/prefer-secure-origins-for-powerful-new-features
  if ('serviceWorker' in navigator &&
      (window.location.protocol === 'https:' ||
       window.location.hostname === 'localhost' ||
       window.location.hostname.indexOf('127.') === 0)) {
    navigator.serviceWorker.register('/service-worker.js', {
      scope: './'
    }).then(function(registration) {
      // Check to see if there's an updated version of service-worker.js with
      // new files to cache:
      // https://slightlyoff.github.io/ServiceWorker/spec/service_worker/index.html#service-worker-registration-update-method
      if (typeof registration.update === 'function') {
        registration.update();
      }

      // updatefound is fired if service-worker.js changes.
      registration.onupdatefound = function () {
        // updatefound is also fired the very first time the SW is installed,
        // and there's no need to prompt for a reload at that point.
        // So check here to see if the page is already controlled,
        // i.e. whether there's an existing service worker.
        if (navigator.serviceWorker.controller) {
          // The updatefound event implies that registration.installing is set:
          // https://slightlyoff.github.io/ServiceWorker/spec/service_worker/index.html#service-worker-container-updatefound-event
          var installingWorker = registration.installing;

          installingWorker.onstatechange = function () {
            switch (installingWorker.state) {
              case 'installed':
                // At this point, the old content will have been purged and the
                // fresh content will have been added to the cache.
                // It's the perfect time to display a "New content is
                // available; please refresh." message in the page's interface.
                break;

              case 'redundant':
                throw new Error('The installing ' +
                                'service worker became redundant.');
            }
          };
        }
      };
    }).catch(function (e) {
      console.error('Error during service worker registration:', e);
    });
  }

  // Your custom JavaScript goes here
})();
